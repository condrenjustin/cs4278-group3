{"ast":null,"code":"import _objectSpread from\"C:/Users/skyle/Desktop/PoSWE/cs4278-group3/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"C:/Users/skyle/Desktop/PoSWE/cs4278-group3/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"C:/Users/skyle/Desktop/PoSWE/cs4278-group3/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/skyle/Desktop/PoSWE/cs4278-group3/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"C:/Users/skyle/Desktop/PoSWE/cs4278-group3/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"C:/Users/skyle/Desktop/PoSWE/cs4278-group3/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\skyle\\\\Desktop\\\\PoSWE\\\\cs4278-group3\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";/**\r\n * Group 3\r\n * Homework 3\r\n * Grant Bowlds (grant.f.bowlds@vanderbilt.edu) \r\n * Donny Carr (donovan.e.carr@vanderbilt.edu) \r\n * Justin Condren (justin.l.condren@vanderbilt.edu)\r\n * Skyler Grandel (skyler.h.grandel@vanderbilt.edu)\r\n */import React from'react';import{Button}from'react-bootstrap';import{GoogleLogin}from'react-google-login';import{useNavigate}from\"react-router-dom\";import{useAuth}from'../components/AuthProvider';import logo from'../images/KOA_only_White.PNG';import\"../styles/SignOn.css\";/** The sign on page makes users sign in with Google SSO\r\n * Users are redirected based on whether they have a koacore email or not\r\n */import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SignOn=/*#__PURE__*/function(_React$Component){_inherits(SignOn,_React$Component);var _super=_createSuper(SignOn);function SignOn(){var _this;_classCallCheck(this,SignOn);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={id:\"\",name:\"\",img:\"\",email:\"\",guest:false};_this.onSignIn=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(googleUser){var profile;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:profile=googleUser.getBasicProfile();console.log('ID: '+profile.getId());// Do not send to your backend! Use an ID token instead.\nconsole.log('Name: '+profile.getName());console.log('Image URL: '+profile.getImageUrl());console.log('Email: '+profile.getEmail());// This is null if the 'email' scope is not present.\n_context.t0=_this.props;_context.next=8;return profile.getEmail();case 8:_context.t1=_context.sent;_context.t0.setCurrentUser.call(_context.t0,_context.t1);_context.t2=_this;_context.next=13;return profile.getId();case 13:_context.t3=_context.sent;_context.next=16;return profile.getName();case 16:_context.t4=_context.sent;_context.next=19;return profile.getImageUrl();case 19:_context.t5=_context.sent;_context.next=22;return profile.getEmail();case 22:_context.t6=_context.sent;_context.t7={id:_context.t3,name:_context.t4,img:_context.t5,email:_context.t6};_context.t2.setState.call(_context.t2,_context.t7);if(_this.state.email.includes(\"@koacore\")){_this.props.navigate('/client-database');}else{_this.props.navigate('/client-landing');}case 26:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.logout=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:console.log(\"Logout called\");_this.setState({id:\"\",name:\"\",img:\"\",email:\"\"});case 2:case\"end\":return _context2.stop();}}},_callee2);}));return _this;}_createClass(SignOn,[{key:\"failLog\",value:/**\r\n   * log an error if logout is unsuccessful\r\n   * @param {error} response The error that caused the failure\r\n   */function failLog(response){console.log(\"Failed\");console.log(response);}/**\r\n   * On success, we reset the state\r\n   */},{key:\"render\",value:/**\r\n   * Component hook to render a page\r\n   * @returns page to render\r\n   */function render(){var _this2=this;/*\r\n    // let info = null; // to display info, uncomment this and the block below and add {info} to the return()\r\n    if(this.state.id !== \"\"){\r\n      \r\n      info = (<div>\r\n        <p>ID: {this.state.id}</p>\r\n        <p>Name: {this.state.name}</p>\r\n        <p>Email: {this.state.email}</p>\r\n        <img src={this.state.img} alt=\"profile\" style={{borderRadius:\"50%\"}}></img>\r\n        <div>\r\n          <GoogleLogout\r\n            clientId=\"1075606334020-sdhvje80qvau18224tlqfb0g1gb5dqeb.apps.googleusercontent.com\"\r\n            buttonText=\"Logout\"\r\n            onLogoutSuccess={this.logout}\r\n            onFailure={this.failLog}\r\n          >\r\n          </GoogleLogout>\r\n        </div>\r\n      </div>)\r\n    }\r\n    */return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{marginTop:\"5%\",marginBottom:\"5%\"},children:/*#__PURE__*/_jsx(\"img\",{src:logo,alt:\"KOACORE Logo\",style:{width:\"60%\"}})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(GoogleLogin,{clientId:\"1075606334020-sdhvje80qvau18224tlqfb0g1gb5dqeb.apps.googleusercontent.com\",discoveryDocs:[\"https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest\"],scope:\"https://www.googleapis.com/auth/calendar.events\",buttonText:\"Continue with Google\",onSuccess:this.onSignIn,onFailure:this.failLog,cookiePolicy:'single_host_origin',isSignedIn:true,theme:\"dark\",width:\"200\",className:\"google-button\"},process.env.REACT_APP_GKEY)}),/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return _this2.props.navigate('/client-landing');},variant:\"outline-light\",style:{marginTop:'20px'},children:\"Continue as Guest\"})]});}}]);return SignOn;}(React.Component);export default function(props){var _useAuth=useAuth(),setCurrentUser=_useAuth.setCurrentUser;var navigate=useNavigate();return/*#__PURE__*/_jsx(SignOn,_objectSpread(_objectSpread({},props),{},{setCurrentUser:setCurrentUser,navigate:navigate}));}","map":{"version":3,"sources":["C:/Users/skyle/Desktop/PoSWE/cs4278-group3/src/pages/SignOn.js"],"names":["React","Button","GoogleLogin","useNavigate","useAuth","logo","SignOn","state","id","name","img","email","guest","onSignIn","googleUser","profile","getBasicProfile","console","log","getId","getName","getImageUrl","getEmail","props","setCurrentUser","setState","includes","navigate","logout","response","marginTop","marginBottom","width","failLog","process","env","REACT_APP_GKEY","Component"],"mappings":"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","sourcesContent":["/**\r\n * Group 3\r\n * Homework 3\r\n * Grant Bowlds (grant.f.bowlds@vanderbilt.edu) \r\n * Donny Carr (donovan.e.carr@vanderbilt.edu) \r\n * Justin Condren (justin.l.condren@vanderbilt.edu)\r\n * Skyler Grandel (skyler.h.grandel@vanderbilt.edu)\r\n */\r\n\r\nimport React from 'react';\r\nimport { Button } from 'react-bootstrap';\r\nimport {GoogleLogin} from 'react-google-login';\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useAuth } from '../components/AuthProvider';\r\nimport logo from '../images/KOA_only_White.PNG';\r\nimport \"../styles/SignOn.css\"\r\n\r\n/** The sign on page makes users sign in with Google SSO\r\n * Users are redirected based on whether they have a koacore email or not\r\n */\r\n\r\nclass SignOn extends React.Component {\r\n  // store users Google Account info\r\n  state = {\r\n    id:\"\",\r\n    name:\"\",\r\n    img:\"\",\r\n    email:\"\",\r\n    guest: false\r\n  }\r\n\r\n  /**\r\n   * On successful sign in, get the user's information\r\n   * @param {GoogleUser} googleUser \r\n   */\r\n  onSignIn = async(googleUser) => {\r\n    var profile = googleUser.getBasicProfile();\r\n\r\n    console.log('ID: ' + profile.getId()); // Do not send to your backend! Use an ID token instead.\r\n    console.log('Name: ' + profile.getName());\r\n    console.log('Image URL: ' + profile.getImageUrl());\r\n    console.log('Email: ' + profile.getEmail()); // This is null if the 'email' scope is not present.\r\n\r\n    this.props.setCurrentUser(await profile.getEmail());\r\n\r\n    this.setState({\r\n      id: await profile.getId(),\r\n      name: await profile.getName(),\r\n      img: await profile.getImageUrl(),\r\n      email: await profile.getEmail()\r\n    });\r\n\r\n    if(this.state.email.includes(\"@koacore\")){\r\n      this.props.navigate('/client-database');\r\n     } else {\r\n      this.props.navigate('/client-landing');\r\n     }\r\n  }\r\n\r\n  /**\r\n   * log an error if logout is unsuccessful\r\n   * @param {error} response The error that caused the failure\r\n   */\r\n  failLog(response){\r\n    console.log(\"Failed\");\r\n    console.log(response);\r\n  }\r\n\r\n  /**\r\n   * On success, we reset the state\r\n   */\r\n  logout = async() => {\r\n    console.log(\"Logout called\");\r\n    this.setState({\r\n      id:\"\",\r\n      name:\"\",\r\n      img:\"\",\r\n      email:\"\"\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Component hook to render a page\r\n   * @returns page to render\r\n   */\r\n  render() {\r\n    /*\r\n    // let info = null; // to display info, uncomment this and the block below and add {info} to the return()\r\n    if(this.state.id !== \"\"){\r\n      \r\n      info = (<div>\r\n        <p>ID: {this.state.id}</p>\r\n        <p>Name: {this.state.name}</p>\r\n        <p>Email: {this.state.email}</p>\r\n        <img src={this.state.img} alt=\"profile\" style={{borderRadius:\"50%\"}}></img>\r\n        <div>\r\n          <GoogleLogout\r\n            clientId=\"1075606334020-sdhvje80qvau18224tlqfb0g1gb5dqeb.apps.googleusercontent.com\"\r\n            buttonText=\"Logout\"\r\n            onLogoutSuccess={this.logout}\r\n            onFailure={this.failLog}\r\n          >\r\n          </GoogleLogout>\r\n        </div>\r\n      </div>)\r\n    }\r\n    */\r\n\r\n    return(\r\n      <div>\r\n        <div style={{marginTop:\"5%\", marginBottom:\"5%\"}}>\r\n          <img src={logo} alt='KOACORE Logo' style={{width:\"60%\"}}></img>\r\n        </div>\r\n        <div>\r\n            <GoogleLogin\r\n              clientId=\"1075606334020-sdhvje80qvau18224tlqfb0g1gb5dqeb.apps.googleusercontent.com\"\r\n              discoveryDocs={[\"https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest\"]}\r\n              scope='https://www.googleapis.com/auth/calendar.events'\r\n              key= {process.env.REACT_APP_GKEY}\r\n              buttonText=\"Continue with Google\"\r\n              onSuccess={this.onSignIn}\r\n              onFailure={this.failLog}\r\n              cookiePolicy={'single_host_origin'}\r\n              isSignedIn={true}\r\n              theme=\"dark\"\r\n              width=\"200\"\r\n              className='google-button'\r\n            />\r\n        </div>\r\n        <Button onClick={()=>this.props.navigate('/client-landing')} \r\n        variant='outline-light'\r\n        style={{marginTop:'20px'}}\r\n        >Continue as Guest</Button>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default function(props) {\r\n  const { setCurrentUser } = useAuth();\r\n  const navigate = useNavigate();\r\n\r\n  return <SignOn {...props} setCurrentUser={setCurrentUser} navigate={navigate}/>;\r\n}"]},"metadata":{},"sourceType":"module"}