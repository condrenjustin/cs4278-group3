{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\skyle\\\\Desktop\\\\PoSWE\\\\cs4278-group3\\\\src\\\\pages\\\\Calendar.js\";\nimport React from 'react';\nimport NavBar from '../components/NavBar';\nimport { Form, Button } from 'react-bootstrap';\nimport Airtable from 'airtable'; //import fs from 'fs';\n//import {google} from 'googleapis';\n\n/**\r\n * This is the calendar page with two calendars: a sales calendar and a event calendar\r\n * The calendars are next to each other so users can see both calendars in the same view\r\n * It includes a Google Calendar integration\r\n */\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nclass CAL extends React.Component {\n  render() {\n    /** Calendar for existing events */\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"iframe\", {\n        src: \"https://airtable.com/embed/shrUeUoHKI6Tbowma?backgroundColor=purple&viewControls=on\",\n        width: 1000,\n        height: 533\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 19,\n        columnNumber: 7\n      }, this)\n    }, void 0, false);\n  }\n\n}\n\nclass ACTCAL extends React.Component {\n  render() {\n    /** Sales calendar */\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"iframe\", {\n        src: \"https://airtable.com/embed/shrFBCTmc1ADoYCEO?backgroundColor=purple&viewControls=on\",\n        width: 1000,\n        height: 533\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 30,\n        columnNumber: 9\n      }, this)\n    }, void 0, false);\n  }\n\n}\n\nclass Calendar extends React.Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      clientId: \"\",\n      apiKey: \"\",\n      discoveryDocs: [],\n      scope: \"\",\n      options: [],\n      selectedOptions: [],\n      date: ''\n    };\n\n    this.componentDidMount = async () => {\n      this.setState({\n        clientId: \"1075606334020-sdhvje80qvau18224tlqfb0g1gb5dqeb.apps.googleusercontent.com\",\n        apiKey: \"AIzaSyDi6f8GTovPHez69kp77CvTSAEzSYBM__Q\",\n        discoveryDocs: [\"https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest\"],\n        scope: \"https://www.googleapis.com/auth/calendar.events\"\n      });\n      console.log(\"options: \", this.state.options);\n    };\n\n    this.getData = async () => {\n      var retArr = [];\n      var base = new Airtable({\n        apiKey: 'keypmQe98NRiZBQcw'\n      }).base('appECiA8jbyRdHrbu');\n      base('CRM-Prospects').select({\n        view: \"All Contacts\"\n      }).eachPage(function page(records, fetchNextPage) {\n        // This function (\"page\") will get called for each page of records.\n        records.forEach(record => {\n          retArr.push(record.get('Name & organization') + ' (' + record.get('Email') + ')');\n        }); // To fetch the next page of records, call `fetchNextPage`.\n        // If there are more records, `page` will get called again.\n        // If there are no more records, `done` will get called.\n\n        fetchNextPage();\n      }, function done(err) {\n        if (err) {\n          console.error(err);\n          return;\n        }\n      });\n      return retArr;\n    };\n\n    this.onSelectedOptionsChange = e => {\n      var selection = [].slice.call(e.target.selectedOptions).map(item => item.value)[0];\n\n      if (this.state.selectedOptions.includes(selection)) {\n        this.setState({\n          selectedOptions: this.state.selectedOptions.filter(e => e != selection)\n        });\n      } else {\n        this.state.selectedOptions.push(selection);\n      }\n    };\n\n    this.handleClick = () => {\n      var gapi = window.gapi;\n      gapi.load('client:auth2', () => {\n        console.log('loaded client');\n        /*\r\n        //not sure if we need gapi.client.setApiKey(\"AIzaSyDi6f8GTovPHez69kp77CvTSAEzSYBM__Q\");\r\n          // this causes an error because we are already signed in, but idk how else to set the\r\n        // client's api key. For now it seems to work, but if we run into future errors, we should keep\r\n        // this code in mind.\r\n          gapi.client.init({\r\n          apiKey: \"AIzaSyDi6f8GTovPHez69kp77CvTSAEzSYBM__Q\",\r\n          clientId: \"1075606334020-sdhvje80qvau18224tlqfb0g1gb5dqeb.apps.googleusercontent.com\",\r\n          discoveryDocs: [\"https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest\"],\r\n          scope: \"https://www.googleapis.com/auth/calendar.events\",\r\n        });\r\n          //datetime format: 'dateTime': '2022-04-28T09:00:00-07:00'\r\n        */\n\n        gapi.client.load('calendar', 'v3', () => console.log('bam!'));\n        gapi.auth2.getAuthInstance().signIn().then(() => {\n          var event = {\n            'summary': 'Reach out to prospective clients',\n            'description': 'reach out to ',\n            'start': {\n              'dateTime': '2022-04-28T09:00:00-07:00'\n            },\n            'end': {\n              'dateTime': '2022-04-28T17:00:00-07:00'\n            }\n            /*\r\n            'attendees': [\r\n              {'email': 'lpage@example.com'},\r\n              {'email': 'sbrin@example.com'}\r\n            ],\r\n            */\n\n          };\n          var request = gapi.client.calendar.events.insert({\n            'calendarId': 'primary',\n            'resource': event\n          });\n          request.execute(event => {\n            console.log(event);\n            window.open(event.htmlLink);\n          });\n        });\n      });\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(NavBar, {\n        employee: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        style: {\n          color: \"#ffffff\"\n        },\n        children: \"Calendar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          style: {\n            margin: \"auto\",\n            color: \"#ffffff\"\n          },\n          children: \"Events\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 19\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          style: {\n            margin: \"auto\",\n            color: \"#ffffff\"\n          },\n          children: \"Sales\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 19\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center'\n        },\n        children: [/*#__PURE__*/_jsxDEV(CAL, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 19\n        }, this), \";\", /*#__PURE__*/_jsxDEV(ACTCAL, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 19\n        }, this), \";\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        style: {\n          margin: \"auto\",\n          marginTop: \"20px\",\n          color: \"#ffffff\"\n        },\n        children: \"Set a calendar reminder to contact a client\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(Form, {\n        onSubmit: e => {\n          e.preventDefault();\n          console.log(this.state.selectedOptions);\n          console.log(this.state.date);\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            width: \"80%\",\n            margin: 'auto',\n            display: 'flex'\n          },\n          children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n            className: \"mb-3\",\n            style: {\n              width: \"40%\",\n              margin: 'auto'\n            },\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              style: {\n                color: \"#ffffff\"\n              },\n              children: \"Which clients do you want to contact?\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 186,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              as: \"select\",\n              multiple: true,\n              value: this.state.selectedOptions,\n              onChange: this.onSelectedOptionsChange,\n              children: this.state.options.map(option => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: option,\n                children: option\n              }, option, false, {\n                fileName: _jsxFileName,\n                lineNumber: 189,\n                columnNumber: 23\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 187,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n            className: \"mb-3\",\n            style: {\n              width: \"40%\",\n              margin: 'auto',\n              marginTop: '0px'\n            },\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              style: {\n                color: \"#ffffff\"\n              },\n              children: \"When should you be reminded?\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 197,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              type: \"date\",\n              value: this.state.date,\n              onChange: e => this.setState({\n                date: e.target.value\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 198,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"primary\",\n          type: \"submit\",\n          children: \"Submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        onClick: this.handleClick,\n        children: \" Add event to Google Calendar \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 15\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 11\n    }, this);\n  }\n\n}\n\nexport default Calendar;","map":{"version":3,"sources":["C:/Users/skyle/Desktop/PoSWE/cs4278-group3/src/pages/Calendar.js"],"names":["React","NavBar","Form","Button","Airtable","CAL","Component","render","ACTCAL","Calendar","state","clientId","apiKey","discoveryDocs","scope","options","selectedOptions","date","componentDidMount","setState","console","log","getData","retArr","base","select","view","eachPage","page","records","fetchNextPage","forEach","record","push","get","done","err","error","onSelectedOptionsChange","e","selection","slice","call","target","map","item","value","includes","filter","handleClick","gapi","window","load","client","auth2","getAuthInstance","signIn","then","event","request","calendar","events","insert","execute","open","htmlLink","color","display","alignItems","justifyContent","margin","marginTop","preventDefault","width","option"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport NavBar from '../components/NavBar';\r\nimport {Form, Button} from 'react-bootstrap';\r\nimport Airtable from 'airtable';\r\n//import fs from 'fs';\r\n//import {google} from 'googleapis';\r\n\r\n/**\r\n * This is the calendar page with two calendars: a sales calendar and a event calendar\r\n * The calendars are next to each other so users can see both calendars in the same view\r\n * It includes a Google Calendar integration\r\n */\r\n\r\nclass CAL extends React.Component {\r\n  render() {\r\n    /** Calendar for existing events */\r\n    return (\r\n      <>\r\n      <iframe src=\"https://airtable.com/embed/shrUeUoHKI6Tbowma?backgroundColor=purple&viewControls=on\" width={1000} height={533} />\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nclass ACTCAL extends React.Component {\r\n    render() {\r\n      /** Sales calendar */\r\n      return (\r\n        <>\r\n        <iframe src=\"https://airtable.com/embed/shrFBCTmc1ADoYCEO?backgroundColor=purple&viewControls=on\" width={1000} height={533} />\r\n        </>\r\n      );\r\n    }\r\n  }\r\n\r\nclass Calendar extends React.Component {\r\n\r\n  state = {\r\n    clientId: \"\",\r\n    apiKey: \"\",\r\n    discoveryDocs: [],\r\n    scope: \"\",\r\n    options: [],\r\n    selectedOptions: [],\r\n    date: ''\r\n  }\r\n\r\n  componentDidMount = async() => {\r\n    this.setState({\r\n      clientId: \"1075606334020-sdhvje80qvau18224tlqfb0g1gb5dqeb.apps.googleusercontent.com\",\r\n      apiKey: \"AIzaSyDi6f8GTovPHez69kp77CvTSAEzSYBM__Q\",\r\n      discoveryDocs: [\"https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest\"],\r\n      scope: \"https://www.googleapis.com/auth/calendar.events\",\r\n    });\r\n\r\n    console.log(\"options: \", this.state.options);\r\n  }\r\n\r\n  getData = async() => {\r\n    var retArr = [];\r\n    var base = new Airtable({apiKey: 'keypmQe98NRiZBQcw'}).base('appECiA8jbyRdHrbu');\r\n\r\n    base('CRM-Prospects').select({\r\n      view: \"All Contacts\"\r\n    }).eachPage(function page(records, fetchNextPage) {\r\n      // This function (\"page\") will get called for each page of records.\r\n  \r\n      records.forEach((record) => {\r\n          retArr.push(record.get('Name & organization') + ' (' + record.get('Email') + ')');\r\n      });\r\n  \r\n      // To fetch the next page of records, call `fetchNextPage`.\r\n      // If there are more records, `page` will get called again.\r\n      // If there are no more records, `done` will get called.\r\n      fetchNextPage();\r\n  \r\n    }, function done(err) {\r\n      if (err) { console.error(err); return; }\r\n    });\r\n\r\n    return retArr;\r\n  }\r\n\r\n  onSelectedOptionsChange = (e) => {\r\n    var selection = [].slice.call(e.target.selectedOptions).map(item => item.value)[0];\r\n\r\n    if(this.state.selectedOptions.includes(selection)){\r\n      this.setState({selectedOptions: this.state.selectedOptions.filter(e => e != selection)});\r\n    } else {\r\n      this.state.selectedOptions.push(selection);\r\n    }\r\n  }\r\n\r\n  handleClick = () => {\r\n    var gapi = window.gapi;\r\n\r\n    gapi.load('client:auth2', () => {\r\n      console.log('loaded client');\r\n\r\n      /*\r\n      //not sure if we need gapi.client.setApiKey(\"AIzaSyDi6f8GTovPHez69kp77CvTSAEzSYBM__Q\");\r\n\r\n      // this causes an error because we are already signed in, but idk how else to set the\r\n      // client's api key. For now it seems to work, but if we run into future errors, we should keep\r\n      // this code in mind.\r\n\r\n      gapi.client.init({\r\n        apiKey: \"AIzaSyDi6f8GTovPHez69kp77CvTSAEzSYBM__Q\",\r\n        clientId: \"1075606334020-sdhvje80qvau18224tlqfb0g1gb5dqeb.apps.googleusercontent.com\",\r\n        discoveryDocs: [\"https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest\"],\r\n        scope: \"https://www.googleapis.com/auth/calendar.events\",\r\n      });\r\n\r\n      //datetime format: 'dateTime': '2022-04-28T09:00:00-07:00'\r\n      */\r\n\r\n\r\n\r\n      gapi.client.load('calendar', 'v3', () => console.log('bam!'));\r\n\r\n      gapi.auth2.getAuthInstance().signIn()\r\n      .then(() => {\r\n        \r\n        var event = {\r\n          'summary': 'Reach out to prospective clients',\r\n          'description': 'reach out to ',\r\n          'start': {\r\n            'dateTime': '2022-04-28T09:00:00-07:00',\r\n          },\r\n          'end': {\r\n            'dateTime': '2022-04-28T17:00:00-07:00',\r\n          },\r\n          /*\r\n          'attendees': [\r\n            {'email': 'lpage@example.com'},\r\n            {'email': 'sbrin@example.com'}\r\n          ],\r\n          */\r\n        };\r\n\r\n        var request = gapi.client.calendar.events.insert({\r\n          'calendarId': 'primary',\r\n          'resource': event,\r\n        });\r\n\r\n        request.execute(event => {\r\n          console.log(event)\r\n          window.open(event.htmlLink)\r\n        });\r\n      });\r\n    })\r\n  }\r\n\r\n  render(){\r\n      return(\r\n          <div>\r\n              <NavBar employee={true} />\r\n              <h1 style={{color:\"#ffffff\"}}>Calendar</h1>\r\n              <div style={{\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  justifyContent: 'center',\r\n              }}>\r\n                  <h2 style={{margin:\"auto\", color:\"#ffffff\"}}>Events</h2>\r\n                  <h2 style={{margin:\"auto\", color:\"#ffffff\"}}>Sales</h2>\r\n              </div>\r\n              <div style={{\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  justifyContent: 'center',\r\n              }}>\r\n                  <CAL />;\r\n                  <ACTCAL />;\r\n              </div>\r\n              \r\n              <h2 style={{margin:\"auto\", marginTop:\"20px\", color:\"#ffffff\"}}>Set a calendar reminder to contact a client</h2>\r\n              <Form onSubmit={(e) => {\r\n              e.preventDefault();\r\n              console.log(this.state.selectedOptions);\r\n              console.log(this.state.date);\r\n              }}>\r\n\r\n                <div style={{width:\"80%\", margin:'auto', display:'flex'}}>\r\n\r\n                <Form.Group className='mb-3' style={{width:\"40%\", margin:'auto'}}>\r\n                  <Form.Label style={{color:\"#ffffff\"}}>Which clients do you want to contact?</Form.Label>\r\n                  <Form.Control as=\"select\" multiple value={this.state.selectedOptions} onChange={this.onSelectedOptionsChange}>\r\n                    {this.state.options.map(option => (\r\n                      <option key={option} value={option}>\r\n                        {option}\r\n                      </option>\r\n                    ))}\r\n                  </Form.Control>\r\n                </Form.Group>\r\n\r\n                <Form.Group className='mb-3' style={{width:\"40%\", margin:'auto', marginTop:'0px'}}>\r\n                  <Form.Label style={{color:\"#ffffff\"}}>When should you be reminded?</Form.Label>\r\n                  <Form.Control\r\n                  type=\"date\"\r\n                  value={this.state.date}\r\n                  onChange={(e)=>this.setState({date:e.target.value})}\r\n                  />\r\n                </Form.Group>\r\n\r\n                </div>\r\n\r\n                <Button variant=\"primary\" type=\"submit\">\r\n                        Submit\r\n                </Button>\r\n              </Form>\r\n              <Button onClick={this.handleClick}> Add event to Google Calendar </Button>\r\n\r\n          </div>\r\n          \r\n      );\r\n  }\r\n}\r\n\r\nexport default Calendar;"]},"metadata":{},"sourceType":"module"}